void configlog (byte datalogset, float CutOffVolts, float CutOffApms, byte SogMorning, byte SogNight, byte NoOfTimers, int onTime1, int offTime1, int onTime2, int offTime2, int onTime3, int offTime3, int onTime4, int offTime4, int onTime5, int offTime5, int offset0, int offset1, int offset2, int offset3, int offset4, int offset5, int offset6, int offset7, int offset8, float Callf0, float Callf1, float Callf2, float Callf3, float Callf4, float Callf5, float Callf6, float Callf7, float Callf8)
{
  if (datalogset == 1)
  {
    if (Serial1.find("+IPD,"))
    {
      delay(10);
      char cid = Serial1.read();
      String data = "<h1>Configuration</h1>";
      data += "<table border=";
      data += '"';
      data += '1';
      data += '"';
      data += "style=";
      data += '"';
      data += "width:100%";
      data += '"';
      data += '>';
      data += "<tr><td>Stay on Grid Time Morning</td><td>Stay on Grid Time Night</td><td>CutOff Apms</td><td>CutOff Voltage</td><td>No. Of Timers</td></tr>";
      data += "<tr>";
      data += "<td>";
      data += String (SogMorning, DEC);
      data += "</td>";
      data += "<td>";
      data += String (SogNight, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (CutOffApms);
      data += "</td>";
      data += "<td>";
      data += ftos (CutOffVolts);
      data += "</td>";
      data += "<td>";
      data += String (NoOfTimers, DEC);
      data += "</td>";
      data += "</tr>";
      data += "</table>";
      data += "<h1>Timers</h1>";
      data += "<table border=";
      data += '"';
      data += '1';
      data += '"';
      data += "style=";
      data += '"';
      data += "width:100%";
      data += '"';
      data += '>';
      data += "<tr><td>On Time1</td><td>Off Time1</td><td>On Time2</td><td>Off Time2</td><td>On Time3</td><td>Off Time3</td><td>On Time4</td><td>Off Time4</td><td>On Time5</td><td>Off Time5</td></tr>";
      data += "<tr>";
      data += "<td>";
      data += String (onTime1, DEC);
      data += "</td>";
      data += "<td>";
      data += String (offTime1, DEC);
      data += "</td>";
      data += "<td>";
      data += String (onTime2, DEC);
      data += "</td>";
      data += "<td>";
      data += String (offTime2, DEC);
      data += "</td>";
      data += "<td>";
      data += String (onTime3, DEC);
      data += "</td>";
      data += "<td>";
      data += String (offTime3, DEC);
      data += "</td>";
      data += "<td>";
      data += String (onTime4, DEC);
      data += "</td>";
      data += "<td>";
      data += String (offTime4, DEC);
      data += "</td>";
      data += "<td>";
      data += String (onTime5, DEC);
      data += "</td>";
      data += "<td>";
      data += String (offTime5, DEC);
      data += "</td>";
      data += "</tr>";
      data += "</table>";
      data += "<h1>Sensors</h1>";
      data += "<table border=";
      data += '"';
      data += '1';
      data += '"';
      data += "style=";
      data += '"';
      data += "width:100%";
      data += '"';
      data += '>';
      data += "<tr><td>Sensor Address</td><td>Sensor Type</td><td>Sensor Offset</td><td>Sensor Calibration Value</td></tr>";
      data += "<tr>";
      data += "<td>";
      data += "0";
      data += "</td>";
      data += "<td>";
      data += "Battery 1 Voltage";
      data += "</td>";
      data += "<td>";
      data += String (offset0, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf0);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "1";
      data += "</td>";
      data += "<td>";
      data += "Battery 2 Voltage";
      data += "</td>";
      data += "<td>";
      data += String (offset1, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf1);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "2";
      data += "</td>";
      data += "<td>";
      data += "Battery 3 Voltage";
      data += "</td>";
      data += "<td>";
      data += String (offset2, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf2);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "3";
      data += "</td>";
      data += "<td>";
      data += "Battery 4 Voltage";
      data += "</td>";
      data += "<td>";
      data += String (offset3, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf3);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "4";
      data += "</td>";
      data += "<td>";
      data += "Combination Voltage";
      data += "</td>";
      data += "<td>";
      data += String (offset4, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf4);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "5";
      data += "</td>";
      data += "<td>";
      data += "Temperature";
      data += "</td>";
      data += "<td>";
      data += String (offset5, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf5);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "6";
      data += "</td>";
      data += "<td>";
      data += "Current";
      data += "</td>";
      data += "<td>";
      data += String (offset6, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf6);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "7";
      data += "</td>";
      data += "<td>";
      data += "Current";
      data += "</td>";
      data += "<td>";
      data += String (offset7, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf7);
      data += "</td>";
      data += "</tr>";
      data += "<tr>";
      data += "<td>";
      data += "8";
      data += "</td>";
      data += "<td>";
      data += "Current";
      data += "</td>";
      data += "<td>";
      data += String (offset8, DEC);
      data += "</td>";
      data += "<td>";
      data += ftos (Callf8);
      data += "</td>";
      data += "</tr>";
      String cmd = "AT+CIPSEND=";
      cmd += cid;
      cmd += ",";
      cmd += data.length();
      cmd += "\r\n";
      SendCmd(cmd, 100, false);
      SendCmd(data, 100, false);
      cmd = "AT+CIPCLOSE=";
      cmd += cid;
      cmd += "\r\n";
      SendCmd(cmd, 100, false);
    }
  }
}

